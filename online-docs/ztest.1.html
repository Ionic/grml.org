<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.2.2" />
<style type="text/css">
/* Debug borders */
p, li, dt, dd, div, pre, h1, h2, h3, h4, h5, h6 {
/*
  border: 1px solid red;
*/
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
}

strong {
  font-weight: bold;
}

tt {
  color: navy;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  font-family: sans-serif;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1 {
  border-bottom: 2px solid silver;
}
h2 {
  border-bottom: 2px solid silver;
  padding-top: 0.5em;
}

div.sectionbody {
  font-family: serif;
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

pre {
  padding: 0;
  margin: 0;
}

span#author {
  color: #527bbd;
  font-family: sans-serif;
  font-weight: bold;
  font-size: 1.1em;
}
span#email {
}
span#revision {
  font-family: sans-serif;
}

div#footer {
  font-family: sans-serif;
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
div#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
div#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

div#preamble,
div.tableblock, div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-right: 10%;
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.5em;
  margin-bottom: 2.5em;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  font-family: sans-serif;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid silver;
  padding: 0.5em;
}

div.listingblock {
  margin-right: 0%;
}
div.listingblock > div.content {
  border: 1px solid silver;
  background: #f4f4f4;
  padding: 0.5em;
}

div.quoteblock > div.content {
  padding-left: 2.0em;
}

div.attribution {
  text-align: right;
}
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 2px solid silver;
}

div.exampleblock > div.content {
  border-left: 2px solid silver;
  padding: 0.5em;
}

div.verseblock div.content {
  white-space: pre;
}

div.imageblock div.content { padding-left: 0; }
div.imageblock img { border: 1px solid silver; }
span.image img { border-style: none; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: italic;
}
dd > *:first-child {
  margin-top: 0;
}

ul, ol {
    list-style-position: outside;
}
ol.olist2 {
  list-style-type: lower-alpha;
}

div.tableblock > table {
  border: 3px solid #527bbd;
}
thead {
  font-family: sans-serif;
  font-weight: bold;
}
tfoot {
  font-weight: bold;
}

div.hlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hlist td {
  padding-bottom: 5px;
}
td.hlist1 {
  vertical-align: top;
  font-style: italic;
  padding-right: 0.8em;
}
td.hlist2 {
  vertical-align: top;
}

@media print {
  div#footer-badges { display: none; }
}

div#toctitle {
  color: #527bbd;
  font-family: sans-serif;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}
/* Workarounds for IE6's broken and incomplete CSS2. */

div.sidebar-content {
  background: #ffffee;
  border: 1px solid silver;
  padding: 0.5em;
}
div.sidebar-title, div.image-title {
  font-family: sans-serif;
  font-weight: bold;
  margin-top: 0.0em;
  margin-bottom: 0.5em;
}

div.listingblock div.content {
  border: 1px solid silver;
  background: #f4f4f4;
  padding: 0.5em;
}

div.quoteblock-content {
  padding-left: 2.0em;
}

div.exampleblock-content {
  border-left: 2px solid silver;
  padding-left: 0.5em;
}

/* IE6 sets dynamically generated links as visited. */
div#toc a:visited { color: blue; }
</style>
<title>ZTEST(1)</title>
</head>
<body>
<div id="header">
<h1>ZTEST(1)</h1>
<span id="author">Michael Gebetsroither</span><br />
<span id="email"><tt>&lt;<a href="mailto:michael.geb@gmx.at">michael.geb@gmx.at</a>&gt;</tt></span><br />
</div>
<h2>NAME</h2>
<div class="sectionbody">
<p>ztest - was written by the ZFS Developers as a ZFS unit test.</p>
</div>
<h2>SYNOPSIS</h2>
<div class="sectionbody">
<p><strong>ztest</strong> &lt;options&gt;</p>
</div>
<h2>DESCRIPTION</h2>
<div class="sectionbody">
<p>This manual page documents briefly the <strong>ztest</strong> command.</p>
<p><strong>ztest</strong> was written by the ZFS Developers as a ZFS unit test. The tool was
developed in tandem with the ZFS functionality and was executed nightly as one
of the many regression test against the daily build. As features were added to
ZFS, unit tests were also added to ztest. In addition, a separate test
development team wrote and executed more functional and stress tests.</p>
<p>By default <strong>ztest</strong> runs for ten minutes and uses block files (stored in /tmp)
to create pools rather than using physical disks. Block files afford <strong>ztest</strong>
its flexibility to play around with zpool components without requiring large
hardware configurations. However, storing the block files in /tmp may not work
for you if you have a small tmp directory.</p>
<p>By default is non-verbose. This is why entering the command above will result
in <strong>ztest</strong> quietly executing for 5 minutes. The -V option can be used to
increase the verbosity of the tool. Adding multiple -V option is allowed and
the more you add the more chatty <strong>ztest</strong> becomes.</p>
<p>After the <strong>ztest</strong> run completes, you should notice many ztest.* files lying
around. Once the run completes you can safely remove these files. Note that you
shouldn't remove these files during a run. You can re-use these files in your
next *ztest* run by using the -E option.</p>
</div>
<h2>OPTIONS</h2>
<div class="sectionbody">
<dl>
<dt>
<strong>-?</strong>
</dt>
<dd>
<p>
Print a help summary
</p>
</dd>
<dt>
<strong>-v vdevs (default: 5)</strong>
</dt>
<dd>
<p>
Number of vdevs.
</p>
</dd>
<dt>
<strong>-s size_of_each_vdev (default: 64M)</strong>
</dt>
<dd>
<p>
Size of each vdev.
</p>
</dd>
<dt>
<strong>-a alignment_shift (default: 9) (use 0 for random)</strong>
</dt>
<dd>
<p>
Used alignment in test.
</p>
</dd>
<dt>
<strong>-m mirror_copies (default: 2)</strong>
</dt>
<dd>
<p>
Number of mirror copies.
</p>
</dd>
<dt>
<strong>-r raidz_disks (default: 4)</strong>
</dt>
<dd>
<p>
Number of raidz disks.
</p>
</dd>
<dt>
<strong>-R raidz_parity (default: 1)</strong>
</dt>
<dd>
<p>
Raidz parity.
</p>
</dd>
<dt>
<strong>-d datasets (default: 7)</strong>
</dt>
<dd>
<p>
Number of datasets.
</p>
</dd>
<dt>
<strong>-t threads (default: 23)</strong>
</dt>
<dd>
<p>
Number of threads.
</p>
</dd>
<dt>
<strong>-g gang_block_threshold (default: 32K)</strong>
</dt>
<dd>
<p>
Gang block threshold.
</p>
</dd>
<dt>
<strong>-i initialize pool i times (default: 1)</strong>
</dt>
<dd>
<p>
Number of pool initialisations.
</p>
</dd>
<dt>
<strong>-k kill percentage (default: 70%)</strong>
</dt>
<dd>
<p>
Kill percentage.
</p>
</dd>
<dt>
<strong>-p pool_name (default: ztest)</strong>
</dt>
<dd>
<p>
Pool name.
</p>
</dd>
<dt>
<strong>-f file directory for vdev files (default: /tmp)</strong>
</dt>
<dd>
<p>
Directory for vdev files.
</p>
</dd>
<dt>
<strong>-V(erbose)</strong>
</dt>
<dd>
<p>
Verbose (use multiple times for ever more blather).
</p>
</dd>
<dt>
<strong>-E(xisting)</strong>
</dt>
<dd>
<p>
Use existing pool (use existing pool instead of creating new one).
</p>
</dd>
<dt>
<strong>-T time (default: 300 sec)</strong>
</dt>
<dd>
<p>
Total test run time.
</p>
</dd>
<dt>
<strong>-P passtime (default: 60 sec)</strong>
</dt>
<dd>
<p>
Time per pass.
</p>
</dd>
<dt>
<strong>-z zil failure rate (default: fail every 2^5 allocs)</strong>
</dt>
<dd>
<p>
Injected failure rate.
</p>
</dd>
</dl>
</div>
<h2>EXAMPLES</h2>
<div class="sectionbody">
<p>To override /tmp as your location for block files, you can use the -f option:</p>
<div class="listingblock">
<div class="content">
<pre><tt>    ztest -f /</tt></pre>
</div></div>
<p>To get an idea of what ztest is actually testing try this:</p>
<div class="listingblock">
<div class="content">
<pre><tt>    ztest -f / -VVV</tt></pre>
</div></div>
<p>Maybe you'd like to run ztest for longer? To do so simply use the -T option and
specify the runlength in seconds like so:</p>
<div class="listingblock">
<div class="content">
<pre><tt>    ztest -f / -V -T 120</tt></pre>
</div></div>
</div>
<h2>SEE ALSO</h2>
<div class="sectionbody">
<p>zpool(1), zfs(1), zdb(1), zfs-fuse(1)</p>
</div>
<h2>AUTHOR</h2>
<div class="sectionbody">
<p>This manual page was transvered to asciidoc by Michael Gebetsroither
&lt;gebi@grml.org&gt; from http://opensolaris.org/os/community/zfs/ztest/</p>
</div>
<div id="footer">
<div id="footer-text">
Last updated 01-Nov-2009 04:31:46 CEST
</div>
</div>
</body>
</html>

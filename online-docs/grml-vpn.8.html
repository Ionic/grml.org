<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 7.1.2" />
<style type="text/css">
/* Debug borders */
p, li, dt, dd, div, pre, h1, h2, h3, h4, h5, h6 {
/*
  border: 1px solid red;
*/
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
}

strong {
  font-weight: bold;
}

tt {
  color: navy;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  font-family: sans-serif;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1 {
  border-bottom: 2px solid silver;
}
h2 {
  border-bottom: 2px solid silver;
  padding-top: 0.5em;
}

div.sectionbody {
  font-family: serif;
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

pre {
  padding: 0;
  margin: 0;
}

span#author {
  color: #527bbd;
  font-family: sans-serif;
  font-weight: bold;
  font-size: 1.2em;
}
span#email {
}
span#revision {
  font-family: sans-serif;
}

div#footer {
  font-family: sans-serif;
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
div#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
div#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

div#preamble,
div.tableblock, div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-right: 10%;
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.5em;
  margin-bottom: 2.5em;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  font-family: sans-serif;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid silver;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid silver;
  background: #f4f4f4;
  padding: 0.5em;
}

div.quoteblock > div.content {
  padding-left: 2.0em;
}

div.attribution {
  text-align: right;
}
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 2px solid silver;
}

div.exampleblock > div.content {
  border-left: 2px solid silver;
  padding: 0.5em;
}

div.verseblock div.content {
  white-space: pre;
}

div.imageblock div.content { padding-left: 0; }
div.imageblock img { border: 1px solid silver; }
span.image img { border-style: none; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: italic;
}
dd > *:first-child {
  margin-top: 0;
}

ul, ol {
    list-style-position: outside;
}
ol.olist2 {
  list-style-type: lower-alpha;
}

div.tableblock > table {
  border: 3px solid #527bbd;
}
thead {
  font-family: sans-serif;
  font-weight: bold;
}
tfoot {
  font-weight: bold;
}

div.hlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
td.hlist1 {
  vertical-align: top;
  font-style: italic;
  padding-right: 0.8em;
}
td.hlist2 {
  vertical-align: top;
}

@media print {
  div#footer-badges { display: none; }
}
/* Workarounds for IE6's broken and incomplete CSS2. */

div.sidebar-content {
  background: #ffffee;
  border: 1px solid silver;
  padding: 0.5em;
}
div.sidebar-title, div.image-title {
  font-family: sans-serif;
  font-weight: bold;
  margin-top: 0.0em;
  margin-bottom: 0.5em;
}

div.listingblock div.content {
  border: 1px solid silver;
  background: #f4f4f4;
  padding: 0.5em;
}

div.quoteblock-content {
  padding-left: 2.0em;
}

div.exampleblock-content {
  border-left: 2px solid silver;
  padding-left: 0.5em;
}
</style>
<title>GRML-VPN(8)</title>
</head>
<body>
<div id="header">
<h1>GRML-VPN(8)</h1>
<span id="author">Michael Gebetsroither</span><br />
<span id="email"><tt>&lt;<a href="mailto:michael.geb@gmx.at">michael.geb@gmx.at</a>&gt;</tt></span><br />
</div>
<h2>NAME</h2>
<div class="sectionbody">
<p>grml-vpn - program to establish encrypted communication channels in a network</p>
</div>
<h2>SYNOPSIS</h2>
<div class="sectionbody">
<p><strong>grml-vpn</strong> [OPTIONS] <em>&lt;ACTION&gt;</em> <em>&lt;SPI&gt;</em> [IPs]</p>
</div>
<h2>DESCRIPTION</h2>
<div class="sectionbody">
<p><strong>grml-vpn</strong> is a program that
provides an easy wrapper around ipsec and setkey (without any ike daemon).
With this program you can create a vpn based uppon ipsec to any number of computers.
It's intended purpose is for example for wlan sessions to create an encrypted network between all computers on the wlan.
It is also possible to create a standalone shellscript which only needs the setkey command to setup the vpn (using the -x option).</p>
</div>
<h2>ACTIONS</h2>
<div class="sectionbody">
<dl>
<dt>
<strong>add</strong>
</dt>
<dd>
<p>
  Add an ipsec entry
</p>
</dd>
<dt>
<strong>del</strong>
</dt>
<dd>
<p>
  Delete an specific ipsec entry
</p>
</dd>
<dt>
<strong>clear</strong>
</dt>
<dd>
<p>
  Delete all ipsec entries (attention, really deletes _all_ entrys, even from other setkey commands and isakmpd).
</p>
</dd>
<dt>
<strong>show</strong>
</dt>
<dd>
<p>
  Show all infos about ipsec entrys.
</p>
</dd>
<dt>
<strong>info</strong>
</dt>
<dd>
<p>
  Give infos about ciphers and there allowed keysizes.
</p>
</dd>
<dt>
<strong>help</strong>
</dt>
<dd>
<p>
  Show the help message.
</p>
</dd>
</dl>
</div>
<h2>OPTIONS</h2>
<div class="sectionbody">
<dl>
<dt>
<strong>-h, help</strong>
</dt>
<dd>
<p>
Show summary of options.
</p>
</dd>
<dt>
<strong>-v</strong>
</dt>
<dd>
<p>
Show what is going on (more v =&gt; more out).
</p>
</dd>
<dt>
<strong>-a &lt;IP&gt;</strong>
</dt>
<dd>
<p>
Your IP (currently necessary for vpns with more than 2 computers given in file or on stdin). If IPs are given on commandline, the script tries hard to guess your IP.
</p>
</dd>
<dt>
<strong>-e &lt;ciphername&gt; (default=rijndael-cbc, better known as AES)</strong>
</dt>
<dd>
<p>
Cipher name. Will be matched against ciphers available for ipsec (all ciphers not only the available ciphers on your box).
eg. "-e two" will match twofish-cbc. If more then one ciphers matches your regexp than the matches are printed and grml-vpn aborts.
</p>
</dd>
<dt>
<strong>-b &lt;keysize&gt; (default=256 bit)</strong>
</dt>
<dd>
<p>
Keysize used for your encryption.
</p>
</dd>
<dt>
<strong>-k &lt;key&gt;</strong>
</dt>
<dd>
<p>
Your key/password for the vpn (will be hashed).
</p>
</dd>
<dt>
<strong>-K &lt;raw-key&gt;</strong>
</dt>
<dd>
<p>
Set raw key (you determine the keysize, not -b).
</p>
</dd>
<dt>
<strong>-f &lt;input-file&gt;</strong>
</dt>
<dd>
<p>
Read IPs for encrypted connections from file (same as from stdin).
</p>
</dd>
<dt>
<strong>-c</strong>
</dt>
<dd>
<p>
Read IPs from stdin (setkey commands are not written until _all_ IPs are read from stdin).
</p>
</dd>
<dt>
<strong>-p</strong>
</dt>
<dd>
<p>
Only print the setkey commands (eg. grml-vpn -p &#8230; |setkey -c).
USE THIS if you create a vpn with many computers, because this is a bit faster).
</p>
</dd>
<dt>
<strong>-x</strong>
</dt>
<dd>
<p>
Print a standalone shellscript which only needs setkey to setup the vpn.
</p>
</dd>
</dl>
</div>
<h2>EXAMPLES</h2>
<div class="sectionbody">
<dl>
<dt>
<strong>grml-vpn -k testpw -b 128 add 1000 192.168.0.1 192.168.0.2</strong>
</dt>
<dd>
<p>
Creates encrypted connections between the two IPs possible, with the pre shared key (PSK) testpw and 128bit rijndael-cbc. You have to execute this command on both computers (if you type this command only on one computer, then it's impossible to create an connection between the two computers).
NOTE: with only 2 computers it's not necessary to specify your own ip with -a.
</p>
</dd>
<dt>
<strong>fakeroot grml-vpn -p -k testpw -b 128 add 1000 192.168.0.1 192.168.0.2</strong>
</dt>
<dd>
<p>
Same as above, but also possible as user.
Use -x instead of -p if you want a full functional shellscript to be printed to stdout.
</p>
</dd>
<dt>
<strong>grml-vpn -e bl -b 255 -a 192.168.0.2 add 2000 192.168.0.1 192.168.0.2 192.168.0.3</strong>
</dt>
<dd>
<p>
Encrypted connections between all 3 computers. This command should be executed on 192.168.0.2 (-a) and on the other two computers with the appropriate -a &lt;IP&gt;.
The cipher is blowfisch-cbc (no, -e bl is NO typo ;).
</p>
</dd>
<dt>
<strong>grml-vpn -a 192.168.0.2 del 2000 192.168.0.1 192.168.0.2 192.168.0.3</strong>
</dt>
<dd>
<p>
This command deletes the previous created encrypted connections on 192.168.0.2 (after this command it's impossible to send data to 192.168.0.{1,3} until you delete the vpn entrys on them (no, even ssh does not work anymore).
You should execute this command on all computers of the vpn (with the appropriate -a &lt;IP&gt; option). You could also use grml-crypt clear to clear all vpn settings.
</p>
</dd>
</dl>
</div>
<h2>SEE ALSO</h2>
<div class="sectionbody">
<p>setkey(8)</p>
</div>
<h2>AUTHOR</h2>
<div class="sectionbody">
<p>grml-vpn was written by Michael Gebetsroither &lt;michael.geb@gmx.at&gt;.</p>
<p>This manual page was written by Michael Gebetsroither &lt;gebi@grml.org&gt;.</p>
</div>
<div id="footer">
<div id="footer-text">
Last updated 16-Sep-2007 02:51:42 CEST
</div>
</div>
</body>
</html>
